<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
	<script src="https://g.alicdn.com/dingding/dingtalk-jsapi/2.10.3/dingtalk.open.js"></script>
  <script>
  var  _app_agent = {
	trident: navigator.userAgent.indexOf('Trident') > -1, // IE内核
	presto: navigator.userAgent.indexOf('Presto') > -1, // opera内核
	webKit: navigator.userAgent.indexOf('AppleWebKit') > -1, // 苹果、谷歌内核
	gecko: navigator.userAgent.indexOf('Gecko') > -1 && navigator.userAgent.indexOf('KHTML') === -1, // 火狐内核
	mobile: !!navigator.userAgent.match(/AppleWebKit.*Mobile.*/), // 是否为移动终端
	ios: !!navigator.userAgent.match(/Mac OS X/), // ios终端
	android: navigator.userAgent.indexOf('Android') > -1 || navigator.userAgent.indexOf('Linux') > -1, // android终端或者uc浏览器
	iPhone: navigator.userAgent.indexOf('iPhone') > -1, // 是否为iPhone或者QQHD浏览器
	iPad: navigator.userAgent.indexOf('iPad') > -1, // 是否iPad
	weixin: navigator.userAgent.indexOf('MicroMessenger') > -1, // 是否微信
	ali: navigator.userAgent.indexOf('AlipayClient') > -1, // 是否支付宝
	qq: navigator.userAgent.match(/\sQQ/i) === ' qq', // 是否QQ
	ding: navigator.userAgent.indexOf('DingTalk') > -1, // 是否钉钉
	wxwork: navigator.userAgent.indexOf('wxwork') > -1, // 是否企业微信
};



	window.onload=()=>{


		alert(JSON.stringify({a:222}))
		// https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.41f976e0ttrRyH#/?devType=org&api=oauth2_1.0%23GetAccessToken
		// "accessToken":"c3d0aab19ecd3b0da55b903bf44b6296"
		fetch('https://oapi.dingtalk.com/get_jsapi_ticket?access_token=c3d0aab19ecd3b0da55b903bf44b6296')
  .then(response => response.json())
  .then(data => {
		alert("成功")
		alert(JSON.stringify(data))
		console.log(data)
	});

	window.dd.ready(function() {
    dd.runtime.permission.requestAuthCode({
        corpId: "ding12345xxx", // 企业id
        onSuccess: function (info) {
                  code = info.code // 通过该免登授权码可以获取用户身份
        }});
});

// 		dd.biz.util.previewImage({
// 	urls: ["https://jeonwei.space/machong/machong.jpg", "https://jeonwei.space/machong/machong.jpg"],
// 	current: "https://jeonwei.space/machong/machong.jpg",
// 	onSuccess : function(res) {
// 		// 调用成功时回调
// 		console.log(res)
// 	},
// 	onFail : function(err) {
// 		// 调用失败时回调
// 		console.log(err)
// 	}
// });
	}
  </script>
</head>
<body>
  dingding 2222!!!
</body>
</html>